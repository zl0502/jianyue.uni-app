(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/article_detail/article_detail"],{"17fa":function(t,e,a){},5722:function(t,e,a){"use strict";var i=a("17fa"),n=a.n(i);n.a},"753f":function(t,e,a){"use strict";a.r(e);var i=a("fb63"),n=a.n(i);for(var c in i)"default"!==c&&function(t){a.d(e,t,function(){return i[t]})}(c);e["default"]=n.a},b477:function(t,e,a){"use strict";a("516a");var i=c(a("b0ce")),n=c(a("f23d"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},ddde:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"container"},[a("text",{staticClass:"article-title"},[t._v(t._s(t.article.title))]),a("view",{staticClass:"article-info"},[a("image",{staticClass:"avatar small",attrs:{src:t.article.avatar}}),a("text",{staticClass:"nickname"},[t._v(t._s(t.article.nickname))]),a("text",[t._v(t._s(t.article.createTime))]),t.userId==t.article.uId||t.followed?t._e():a("button",{staticClass:"follow-btn",attrs:{eventid:"13b0ef24-0"},on:{tap:t.follow}},[t._v("关注")]),t.userId!=t.article.uId&&t.followed?a("button",{staticClass:"follow-btn cancel",attrs:{eventid:"13b0ef24-1"},on:{tap:t.cancelFollow}},[t._v("取消")]):t._e()],1),a("view",{staticClass:"grace-text",staticStyle:{"margin-top":"10px"}},[a("rich-text",{attrs:{nodes:t.article.content,bindtap:"tap",mpcomid:"13b0ef24-0"}}),t.userId==t.article.uId||t.liked?t._e():a("button",{staticClass:"follow-btn1",attrs:{eventid:"13b0ef24-2"},on:{tap:t.like}},[a("image",{attrs:{src:"../../static/heart1.png"}})]),t.userId!=t.article.uId&&t.liked?a("button",{staticClass:"follow-btn1 cancel",attrs:{eventid:"13b0ef24-3"},on:{tap:t.cancelLike}},[a("image",{attrs:{src:"../../static/heart.png"}})]):t._e()],1),a("text",{staticClass:"info-text"},[t._v("评论"+t._s(t.comments.length))]),t._l(t.comments,function(e,i){return a("view",{key:i,staticClass:"comment-item"},[a("view",{staticClass:"left"},[a("image",{staticClass:"avatar small",attrs:{src:e.avatar}})]),a("view",{staticClass:"right"},[a("text",[t._v(t._s(e.nickname))]),a("text",[t._v(t._s(e.content))]),a("view",[a("text",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.comments.length-i)+"楼")]),a("text",[t._v(t._s(e.commentTime))])])])])}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"uni-input comment-box",attrs:{type:"text",placeholder:"写下你的评论",required:"required",eventid:"13b0ef24-4"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),a("button",{staticClass:"green-btn",attrs:{eventid:"13b0ef24-5"},on:{tap:t.send}},[t._v("提交")])],2)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},f23d:function(t,e,a){"use strict";a.r(e);var i=a("ddde"),n=a("753f");for(var c in n)"default"!==c&&function(t){a.d(e,t,function(){return n[t]})}(c);a("5722");var o=a("2877"),s=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},fb63:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{article:{aId:0,uId:0,title:"",content:"",avatar:"",nickname:"",createTime:""},comments:[],content:"",userId:t.getStorageSync("login_key").userId,followed:!1,liked:!1}},onLoad:function(t){this.article.aId=t.aId},onShow:function(){this.getArticle()},onPullDownRefresh:function(){this.getArticle()},methods:{getArticle:function(){var e=this;t.request({url:this.apiServer+"/article/"+this.article.aId,method:"GET",header:{"content-type":"application/x-www-form-urlencoded"},data:{userId:this.userId},success:function(t){console.log(t.data.data.article),e.article.aId=t.data.data.article.id,e.article.uId=t.data.data.article.uid,e.article.title=t.data.data.article.title,e.article.content=t.data.data.article.content,e.article.nickname=t.data.data.article.nickname,e.article.avatar=t.data.data.article.avatar,e.article.createTime=t.data.data.article.createTime,e.comments=t.data.data.comments,"已关注"===t.data.data.followed&&(e.followed=!0,e.liked=!0)},complete:function(){t.stopPullDownRefresh()}})},handleTime:function(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():""+e.getDate(),c=e.getHours()<10?"0"+e.getHours():""+e.getHours(),o=e.getMinutes()<10?"0"+e.getMinutes():""+e.getMinutes(),s=e.getSeconds()<10?"0"+e.getSeconds():""+e.getSeconds();return a+"-"+i+"-"+n+" "+c+":"+o+":"+s},send:function(){var e=this;console.log("评论人编号："+this.userId+",文章编号："+this.article.aId+"，评论内容："+this.content),t.request({url:this.apiServer+"/comment/add",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{aId:this.article.aId,uId:this.userId,content:this.content},success:function(a){0===a.data.code&&(t.showToast({title:"评论成功"}),e.getArticle(),e.content="")}})},follow:function(){var e=this;t.request({url:this.apiServer+"/follow/add",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromUId:this.userId,toUId:this.article.uId},success:function(a){0===a.data.code&&(t.showToast({title:"关注成功"}),e.followed=!0)}})},like:function(){var e=this;t.request({url:this.apiServer+"/like/add",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromId:this.userId,toId:this.article.uId},success:function(a){0===a.data.code&&(t.showToast({title:"喜欢"}),e.liked=!0)}})},cancelFollow:function(){var e=this;t.request({url:this.apiServer+"/follow/cancel",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromUId:this.userId,toUId:this.article.uId},success:function(a){0===a.data.code&&(t.showToast({title:"已取消关注"}),e.followed=!1)}})},cancelLike:function(){var e=this;t.request({url:this.apiServer+"/like/cancel",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{fromId:this.userId,toId:this.article.uId},success:function(a){0===a.data.code&&(t.showToast({title:""}),e.liked=!1)}})}}};e.default=a}).call(this,a("649d")["default"])}},[["b477","common/runtime","common/vendor"]]]);